
# 🕷️ Divar Scraper | اسکریپر دیوار

<div dir="rtl">

یک اسکریپت پیشرفته برای استخراج آگهی‌ها و شماره‌تلفن‌ها از سایت [divar.ir](https://divar.ir) با استفاده از Selenium و WebDriver. این ابزار می‌تواند بر اساس شهر، دسته‌بندی و تعداد محدودشده آگهی‌ها را جمع‌آوری کند و شماره‌های تماس کاربران را ذخیره کند.
اسکریپت برای اینکه بتواند شماره تلفن ها را استخراج کند ، به یک شماره ایران نیاز دارد 

</div>

---

## 🔧 Features | ویژگی‌ها

- [x] استخراج لینک و شماره تماس آگهی‌ها
- [x] پشتیبانی از دسته‌بندی و فیلتر شهری
- [x] ذخیره لاگ‌های خروجی برای هر اجرا
- [x] مدیریت خطاهای پیشرفته و مقاوم در برابر Timeout
- [x] قابل اجرا روی مرورگرهای مختلف با WebDriver مناسب
- [x] ساختار ماژولار و قابل توسعه برای توسعه‌دهندگان
- [x] مدیریت خطاهای پیشرفته
- [x] اسکرول خودکار صفحات
- [x] ذخیره نتایج با timestamp
- [x] پشتیبانی از اعداد فارسی
---

## 📁 Project Structure | ساختار پروژه

```
DivarCrawler/
├── bot.py                # فایل اصلی اجرای برنامه
├── config.py             # فایل پیکربندی
├── Divar_Scraper_Pro.py # ماژول‌های کمکی مانند login و scraping
├── Cities.json           # لیست شهرها
├── msedgedriver.exe      # مرورگر Edge WebDriver
└── Output/
    └── log/              # خروجی شماره تماس‌ها و لینک‌ها
```
## نمونه خروجی در کنسول:
```text
📌 آگهی جدید:
عنوان: پراید ۱۳۹۵ صفر کیلومتر
شماره: ۰۹۱۲۳۴۵۶۷۸۹
لینک: https://divar.ir/v/XXXXXX

📌 آگهی جدید:
عنوان: تویوتا کمری ۲۰۱۸ کامل
شماره: ۰۹۳۸۱۲۳۴۵۶۷
لینک: https://divar.ir/v/YYYYYY
```
---
## فایل خروجی (در پوشه results):
```json
[
    {
        "title": "پراید ۱۳۹۵ صفر کیلومتر",
        "link": "https://divar.ir/v/XXXXXX",
        "timestamp": "2023-05-10T15:30:45.123456",
        "phone": "0912*******"
    },
    {
        "title": "تویوتا کمری ۲۰۱۸ کامل",
        "link": "https://divar.ir/v/YYYYYY",
        "timestamp": "2023-05-10T15:31:10.654321",
        "phone": "09381234567"
    }
]
```
---

## ⚙️ Installation & Setup | نصب و راه‌اندازی

### 1. Clone & Install Requirements | کلون و نصب پیش‌نیازها:

```bash
pip install -r requirements.txt
```

یا به صورت دستی:

```bash
pip install selenium beautifulsoup4
```

### 2. Configure Settings | پیکربندی

در فایل `config.py`، اطلاعات لازم مانند شماره تلفن، کلیدواژه جست‌وجو، شهر و دسته‌بندی را وارد کنید.

### 3. Run the Bot | اجرای برنامه

```bash
python bot.py
```
## نکات کلیدی برای اجرا:

- برنامه ابتدا شهر تهران را انتخاب می‌کند

- سپس وارد صفحه ورود می‌شود

- شماره شما را به صورت خودکار وارد می‌کند

- منتظر می‌ماند تا شما کد پیامک شده را دستی وارد کنید

- بعد از ورود موفق، در کنسول پایتون کلید Enter را بزنید

---

## 🌐 Browser Info | اطلاعات مرورگر

پیش‌فرض:

- Microsoft Edge  
- WebDriver: `msedgedriver.exe`  
- Tested on: Windows 10/11

در صورت استفاده از مرورگر دیگر، WebDriver آن را جایگزین کرده و فایل‌های مربوطه را تغییر دهید.

---

## ⚠️ Notes | نکات مهم

<div dir="rtl">

- مطمئن شوید مرورگر شما به روز است.
- WebDriver مربوط به نسخه مرورگر را در مسیر پروژه قرار دهید.
- شماره تلفن واردشده در `config.py` باید معتبر و ایرانی باشد.
- استفاده بیش از حد ممکن است منجر به بلاک شدن موقتی IP شود.

</div>

---

## 📌 License

MIT © [nimaofe](https://t.me/nimaofe)

---

> برای توسعه بیشتر، ساخت GUI یا اتصال به بانک داده، ساختار پروژه آماده توسعه است.


## Refrence
- https://pypi.org/project/DivarApi/